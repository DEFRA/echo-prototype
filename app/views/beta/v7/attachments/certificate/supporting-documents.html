{% extends "layout.html" %}

{% block pageTitle %}
Check your answers
{% endblock %}

{% block beforeContent %}
<!-- call the same block in the main layout file -->
{{super()}}
<!-- add admin navbar from includes folder -->
<!-- back button -->
<div>
  <a class="govuk-back-link" id="link-back" href="../certifier-{{data.orgs or 'single'}}-org-dashboard">Back</a>
</div>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds">
    {% if query.delete_file == 'yes'%}
    <div class="defra-alert defra-alert--success"><p class="govuk-body govuk-!-margin-bottom-0">Succesfully deleted file {{data.file}}</p></div>
    {% endif %}
    <h1 id="supplementary-documents" class="govuk-heading-xl">Supporting documents</h1>
    </div>
    </div>
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
          <h3 class="govuk-heading-m"><span class="file_count">3</span> files uploaded</h3>
          {% if not query.exporter %}<p class="govuk-body">You cannot delete files uploaded by the exporter</p>{% endif %}
          <table class="govuk-table">
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header app-custom-class govuk-!-width-one-half">File name</th>
                <th scope="col" class="govuk-table__header app-custom-class ">File description</th>
                <th scope="col" class="govuk-table__header app-custom-class govuk-!-width-one-quarter">Actions</th>
              </tr>
            </thead>
            <tbody class="govuk-table__body">
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header"><a href="#"><span class="govuk-visually-hidden" >view</span> test_support.docx</th>
                <td class="govuk-table__cell">Test description</td>
                <td class="govuk-table__cell">
                  <a id="view_link_test_support.docx" href="/protected/form/8270EHC/application/1721147992687/supplementary-documents/10977038-996d-492d-be43-8e1988e5667a/view" rel="noreferrer noopener" class="govuk-link">Download</a>
                  {% if query.exporter %}
                  &nbsp; <a id="view_link_test_support.docx" href="confirm_file_delete" rel="noreferrer noopener"
                        class="govuk-link">Delete</a>
                  {% endif %}

                </td>

              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header"><a href="#"><span class="govuk-visually-hidden" >view</span>test_support.docx</a></th>
                <td class="govuk-table__cell">Test description</td>
                <td class="govuk-table__cell"><a id="view_link_test_support.docx" href="/protected/form/8270EHC/application/1721147992687/supplementary-documents/10977038-996d-492d-be43-8e1988e5667a/view" rel="noreferrer noopener" target="_blank"
                    class="govuk-link">Download</a>
                    {% if query.exporter %}
                    &nbsp; <a id="view_link_test_support.docx" href="confirm_file_delete" rel="noreferrer noopener"
                          class="govuk-link">Delete</a>
                    {% endif %}
                  </td>
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header"><a href="#"><span class="govuk-visually-hidden" >view</span>test_support.docx</a></th>
                <td class="govuk-table__cell">Test description</td>
                <td class="govuk-table__cell"><a id="view_link_test_support.docx" href="/protected/form/8270EHC/application/1721147992687/supplementary-documents/10977038-996d-492d-be43-8e1988e5667a/view" rel="noreferrer noopener" target="_blank"
                    class="govuk-link">Download</a>
                    {% if query.exporter %}
                    &nbsp; <a id="view_link_test_support.docx" href="confirm_file_delete" rel="noreferrer noopener"
                          class="govuk-link">Delete</a>
                    {% endif %}
                  </td>
              </tr>
              {% if data.file and query.delete_file != 'yes'%}
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header"><a href="#"><span class="govuk-visually-hidden" >view</span>{{data.file}}</a></th>
                <td class="govuk-table__cell">{{data.description}}</td>
                <td class="govuk-table__cell">
                  <a id="view_link_test_support.docx" href="/protected/form/8270EHC/application/1721147992687/supplementary-documents/10977038-996d-492d-be43-8e1988e5667a/view" rel="noreferrer noopener" target="_blank" class="govuk-link">Download</a>
                  &nbsp;
                  <a id="view_link_test_support.docx" href="confirm_file_delete" rel="noreferrer noopener"
                        class="govuk-link">Delete</a></td>
              </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
</div>
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
          <form id="form-upload" action="" method="get">


            <fieldset class="govuk-fieldset">


              <div class="govuk-form-group">
                <h3 class="govuk-label-wrapper">
                  <label class="govuk-label govuk-label--m" for="file">Upload a file</label>
                </h3>
                <span class="govuk-hint">Files must have a unique name, be PDF, Word, Excel or JPEG and be less than 10 megabytes (10 MB).</span>
                <input class="inputfile govuk-file-upload" id="file" name="file" accept=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg" type="file">
              </div>
              <div class="govuk-form-group">
                <label class="govuk-label" for="description">
                  File description
                </label>
                <textarea rows="2" id="description" name="description" class="govuk-textarea margin-bottom-0" maxlength="100"></textarea>
              </div>
              <div class="govuk-form-group">
                <input class="govuk-button govuk-button--secondary" type="button" name="upload" value="Choose and upload file" id="Choose_File_Button" data-qa-id="Button-Upload">
              </div>
            </fieldset>
          </form>
          <form method="post" action="{{query.return_to or '../../summary/case-dispached-new-group?status_2949=approved&return=dispatched-group&is_group=yes#attachment-tab'}}">
            <input class="govuk-button" type="submit" value="Save and continue" id="Button-SaveAndContinue" data-qa-id="Button-SaveAndContinue">
          </form>
        </div>
      </div>



  </div>
</div>
<script type="text/javascript">
  document.getElementById("Choose_File_Button").
addEventListener("click", function(){

 document.getElementById("file").click();
 document.getElementById("filename").value = document.getElementById("file").value;

});
  window.addEventListener('load', function() {
    $('#file').change(function(){
      $('#form-upload').submit()
})

      $('.file_count').text($('tbody .govuk-table__row').length)
  })
</script>
{% endblock %}
